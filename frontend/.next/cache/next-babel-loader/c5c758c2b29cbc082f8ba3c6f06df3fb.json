{"ast":null,"code":"var _jsxFileName = \"/home/fabian/programming_Exercises/facebook-clone/frontend/components/SignIn/SignIn.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { SIGN_IN } from \"../../queries/user.query\";\n\nconst SignIn = () => {\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"test@test.com\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"testtest\");\n  const {\n    0: error,\n    1: setError\n  } = useState(false);\n  const {\n    0: key,\n    1: setKey\n  } = useState(\"\");\n  const [login, result] = useMutation(SIGN_IN, {\n    onError: error => {\n      setError(true);\n      alert(error.message);\n    }\n  });\n  useEffect(() => {\n    setKey(localStorage.getItem(\"token\"));\n  }, []);\n  useEffect(() => {\n    if (result.data) {\n      const token = result.data.login.value;\n      const firstName = result.data.login.firstName;\n      const lastName = result.data.login.lastName;\n      const friends = result.data.login.friends;\n      const friendsRequest = result.data.login.friendsRequests;\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"firstName\", firstName);\n      localStorage.setItem(\"lastName\", lastName);\n    }\n  }, [result.data]);\n\n  const handleForm = async () => {\n    await login({\n      variables: {\n        email,\n        password\n      }\n    });\n    window.location.reload();\n  };\n\n  const handleSignOut = () => {\n    setKey(\"\");\n    localStorage.clear();\n  };\n\n  const SignInForm = __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 3\n    }\n  }, __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    value: email,\n    onChange: ({\n      target\n    }) => setEmail(target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }), __jsx(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    value: password,\n    onChange: ({\n      target\n    }) => setPassword(target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  })), __jsx(\"button\", {\n    onClick: handleForm,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }\n  }, \"Submit\"));\n\n  if (result.loading) return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, \"Loading...\");\n\n  const signOut = __jsx(\"button\", {\n    onClick: handleSignOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 18\n    }\n  }, \"Sign Out\");\n\n  return key ? signOut : SignInForm;\n};\n\nexport default SignIn;","map":{"version":3,"sources":["/home/fabian/programming_Exercises/facebook-clone/frontend/components/SignIn/SignIn.tsx"],"names":["React","useState","useEffect","useMutation","SIGN_IN","SignIn","email","setEmail","password","setPassword","error","setError","key","setKey","login","result","onError","alert","message","localStorage","getItem","data","token","value","firstName","lastName","friends","friendsRequest","friendsRequests","setItem","handleForm","variables","window","location","reload","handleSignOut","clear","SignInForm","target","loading","signOut"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { SIGN_IN } from \"../../queries/user.query\";\n\nconst SignIn = (): JSX.Element => {\n\tconst [email, setEmail] = useState<string>(\"test@test.com\");\n\tconst [password, setPassword] = useState<string>(\"testtest\");\n\tconst [error, setError] = useState<boolean>(false);\n\n\tconst [key, setKey] = useState<string>(\"\");\n\n\tconst [login, result] = useMutation(SIGN_IN, {\n\t\tonError: (error) => {\n\t\t\tsetError(true);\n\t\t\talert(error.message);\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tsetKey(localStorage.getItem(\"token\"));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (result.data) {\n\t\t\tconst token = result.data.login.value;\n\t\t\tconst firstName = result.data.login.firstName;\n\t\t\tconst lastName = result.data.login.lastName;\n\t\t\tconst friends = result.data.login.friends;\n\t\t\tconst friendsRequest = result.data.login.friendsRequests;\n\t\t\tlocalStorage.setItem(\"token\", token);\n\t\t\tlocalStorage.setItem(\"firstName\", firstName);\n\t\t\tlocalStorage.setItem(\"lastName\", lastName);\n\t\t}\n\t}, [result.data]);\n\n\tconst handleForm = async () => {\n\t\tawait login({\n\t\t\tvariables: { email, password },\n\t\t});\n\t\twindow.location.reload();\n\t};\n\n\tconst handleSignOut = () => {\n\t\tsetKey(\"\");\n\t\tlocalStorage.clear();\n\t};\n\n\tconst SignInForm = (\n\t\t<div>\n\t\t\t<form>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={({ target }) => setEmail(target.value)}\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={({ target }) => setPassword(target.value)}\n\t\t\t\t/>\n\t\t\t</form>\n\t\t\t<button onClick={handleForm} type=\"submit\">\n\t\t\t\tSubmit\n\t\t\t</button>\n\t\t</div>\n\t);\n\n\tif (result.loading) return <div>Loading...</div>;\n\tconst signOut = <button onClick={handleSignOut}>Sign Out</button>;\n\n\treturn key ? signOut : SignInForm;\n};\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}