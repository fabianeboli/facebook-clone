{"ast":null,"code":"var _jsxFileName = \"/home/fabian/programming_Exercises/facebook-clone/frontend/components/Posts/Post/Post.tsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Comment from \"../../Comment/Comment\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport { LIKE_POST, UNLIKE_POST, IS_LIKED_BY_USER, FIND_POST_BY_ID } from \"../../../queries/post.query\";\n\nconst Post = props => {\n  var _props$user, _props$user2, _props$comments;\n\n  // !TODO BUTTON SHOULD BE DISABLED WHILE LIKING OR UNLIKING\n  const [like, {\n    loading: likeLoading\n  }] = useMutation(LIKE_POST, {\n    refetchQueries: [{\n      query: FIND_POST_BY_ID,\n      variables: {\n        id: props.id\n      }\n    }, {\n      query: IS_LIKED_BY_USER,\n      variables: {\n        id: props.id,\n        userId: localStorage.getItem(\"id\")\n      }\n    }]\n  });\n  const [unlike, {\n    loading: unlikeLoading\n  }] = useMutation(UNLIKE_POST, {\n    refetchQueries: [{\n      query: FIND_POST_BY_ID,\n      variables: {\n        id: props.id\n      }\n    }, {\n      query: IS_LIKED_BY_USER,\n      variables: {\n        id: props.id,\n        userId: localStorage.getItem(\"id\")\n      }\n    }]\n  });\n  const {\n    data\n  } = useQuery(IS_LIKED_BY_USER, {\n    variables: {\n      id: props.id,\n      userId: localStorage.getItem(\"id\")\n    },\n    onError: error => {\n      console.log(\"Error: \", error.message);\n    }\n  });\n\n  const likeFunction = async () => {\n    (data === null || data === void 0 ? void 0 : data.isLikedByUser) ? await unlike({\n      variables: {\n        id: props.id,\n        userId: localStorage.getItem(\"id\")\n      }\n    }) : await like({\n      variables: {\n        id: props.id,\n        userId: localStorage.getItem(\"id\")\n      }\n    });\n  }; // const LikeUnLikeButton = (): JSX.Element => {\n  // \treturn (\n  // \t);\n  // \tconst unLikeButton = (\n  // \t\t<button disabled={unlikeLoading} onClick={() => likeFunction()}>\n  // \t\t\t{\" \"}\n  // \t\t\tUnlike{\" \"}\n  // \t\t</button>\n  // \t);\n  // \treturn data?.isLikedByUser ? unLikeButton : likeButton;\n  // };\n\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 3\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }\n  }, __jsx(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, (_props$user = props.user) === null || _props$user === void 0 ? void 0 : _props$user.firstName, \" \", (_props$user2 = props.user) === null || _props$user2 === void 0 ? void 0 : _props$user2.lastName, \" \", __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 6\n    }\n  }, props.date))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, props.content)), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }\n  }, props.likes), __jsx(\"button\", {\n    disabled: (data === null || data === void 0 ? void 0 : data.isLikedByUser) ? unlikeLoading : likeLoading,\n    onClick: () => likeFunction(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }\n  }, \" \", (data === null || data === void 0 ? void 0 : data.isLikedByUser) ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 28\n    }\n  }, \" Like\") : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 47\n    }\n  }, \" Unlike \")), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }\n  }, props === null || props === void 0 ? void 0 : (_props$comments = props.comments) === null || _props$comments === void 0 ? void 0 : _props$comments.map(comment => {\n    __jsx(Comment, {\n      firstName: comment.firstName,\n      lastName: comment.lastName,\n      content: comment.content,\n      date: comment.date,\n      likes: comment.likes,\n      comments: comment.comments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 6\n      }\n    });\n  })));\n};\n\nexport default Post;","map":{"version":3,"sources":["/home/fabian/programming_Exercises/facebook-clone/frontend/components/Posts/Post/Post.tsx"],"names":["React","Comment","useMutation","useQuery","LIKE_POST","UNLIKE_POST","IS_LIKED_BY_USER","FIND_POST_BY_ID","Post","props","like","loading","likeLoading","refetchQueries","query","variables","id","userId","localStorage","getItem","unlike","unlikeLoading","data","onError","error","console","log","message","likeFunction","isLikedByUser","user","firstName","lastName","date","content","likes","comments","map","comment"],"mappings":"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","sourcesContent":["import React, { FC, useState } from \"react\";\nimport Comment, { IComment } from \"../../Comment/Comment\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport {\n\tLIKE_POST,\n\tALL_POSTS,\n\tUNLIKE_POST,\n\tIS_LIKED_BY_USER,\n\tFIND_POST_BY_ID,\n} from \"../../../queries/post.query\";\n\nexport interface IPost {\n\tid: string;\n\tuser?: {\n\t\tfirstName: string;\n\t\tlastName: string;\n\t};\n\tfirstName: string;\n\tlastName: string;\n\tdate: string;\n\tcontent: string;\n\tlikes: number;\n\tcomments: IComment[];\n}\n\nconst Post = (props: IPost): JSX.Element => {\n\t// !TODO BUTTON SHOULD BE DISABLED WHILE LIKING OR UNLIKING\n\n\tconst [like, { loading: likeLoading }] = useMutation(LIKE_POST, {\n\t\trefetchQueries: [\n\t\t\t{ query: FIND_POST_BY_ID, variables: { id: props.id } },\n\t\t\t{\n\t\t\t\tquery: IS_LIKED_BY_USER,\n\t\t\t\tvariables: { id: props.id, userId: localStorage.getItem(\"id\") },\n\t\t\t},\n\t\t],\n\t});\n\tconst [unlike, { loading: unlikeLoading }] = useMutation(UNLIKE_POST, {\n\t\trefetchQueries: [\n\t\t\t{ query: FIND_POST_BY_ID, variables: { id: props.id } },\n\t\t\t{\n\t\t\t\tquery: IS_LIKED_BY_USER,\n\t\t\t\tvariables: { id: props.id, userId: localStorage.getItem(\"id\") },\n\t\t\t},\n\t\t],\n\t});\n\n\tconst { data } = useQuery(IS_LIKED_BY_USER, {\n\t\tvariables: { id: props.id, userId: localStorage.getItem(\"id\") },\n\t\tonError: (error) => {\n\t\t\tconsole.log(\"Error: \", error.message);\n\t\t},\n\t});\n\n\tconst likeFunction = async () => {\n\t\tdata?.isLikedByUser\n\t\t\t? await unlike({\n\t\t\t\tvariables: { id: props.id, userId: localStorage.getItem(\"id\") },\n\t\t\t  })\n\t\t\t: await like({\n\t\t\t\tvariables: { id: props.id, userId: localStorage.getItem(\"id\") },\n\t\t\t  });\n\t};\n\n\t// const LikeUnLikeButton = (): JSX.Element => {\n\t// \treturn (\n\n\t// \t);\n\n\t// \tconst unLikeButton = (\n\t// \t\t<button disabled={unlikeLoading} onClick={() => likeFunction()}>\n\t// \t\t\t{\" \"}\n\t// \t\t\tUnlike{\" \"}\n\t// \t\t</button>\n\t// \t);\n\t// \treturn data?.isLikedByUser ? unLikeButton : likeButton;\n\t// };\n\n\treturn (\n\t\t<div>\n\t\t\t<div>\n\t\t\t\t<h4>\n\t\t\t\t\t{props.user?.firstName} {props.user?.lastName}{\" \"}\n\t\t\t\t\t<span>{props.date}</span>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<p>{props.content}</p>\n\t\t\t</div>\n\t\t\t<div>{props.likes}</div>\n\t\t\t<button\n\t\t\t\tdisabled={data?.isLikedByUser ? unlikeLoading : likeLoading}\n\t\t\t\tonClick={() => likeFunction()}\n\t\t\t>\n\t\t\t\t{\" \"}\n\t\t\t\t{data?.isLikedByUser ? <div> Like</div> : <div> Unlike </div>}\n\t\t\t</button>\n\t\t\t<div>\n\t\t\t\t{props?.comments?.map((comment: IComment) => {\n\t\t\t\t\t<Comment\n\t\t\t\t\t\tfirstName={comment.firstName}\n\t\t\t\t\t\tlastName={comment.lastName}\n\t\t\t\t\t\tcontent={comment.content}\n\t\t\t\t\t\tdate={comment.date}\n\t\t\t\t\t\tlikes={comment.likes}\n\t\t\t\t\t\tcomments={comment.comments}\n\t\t\t\t\t/>;\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}