{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/fabian/programming_Exercises/facebook-clone/frontend/components/SignIn/SignIn.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { SIGNIN } from \"../../queries/user.query\";\n\nvar SignIn = function SignIn() {\n  _s();\n\n  var _useState = useState(\"\"),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(false),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useMutation = useMutation(SIGNIN, {\n    onError: function onError(error) {\n      setError(true);\n      console.log(error.graphQLErrors[0].message);\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      login = _useMutation2[0],\n      result = _useMutation2[1];\n\n  useEffect(function () {\n    if (result.data) {\n      var token = result.data.login.value;\n      var firstName = result.data.login.firstName;\n      var lastName = result.data.login.lastName;\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"firstName\", firstName);\n      localStorage.setItem(\"lastName\", lastName);\n    }\n  }, [result.data]);\n\n  var handleForm = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              login({\n                variables: {\n                  email: email,\n                  password: password\n                }\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleForm(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleSignOut = function handleSignOut() {\n    localStorage.clear();\n  };\n\n  var SignInForm = __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 3\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    value: email,\n    onChange: function onChange(_ref2) {\n      var target = _ref2.target;\n      return setEmail(target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }), __jsx(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    value: password,\n    onChange: function onChange(_ref3) {\n      var target = _ref3.target;\n      return setPassword(target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  })));\n\n  if (result.loading) return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 29\n    }\n  }, \"Loading...\");\n\n  var signOut = __jsx(\"button\", {\n    onClick: handleSignOut,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 18\n    }\n  }, \"Sign Out\");\n\n  return false ? signOut : SignInForm;\n};\n\n_s(SignIn, \"gIK2cE/zWK23xwvTZZksFiuifjo=\", false, function () {\n  return [useMutation];\n});\n\n_c = SignIn;\nexport default SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/home/fabian/programming_Exercises/facebook-clone/frontend/components/SignIn/SignIn.tsx"],"names":["React","useState","useEffect","useMutation","SIGNIN","SignIn","email","setEmail","password","setPassword","error","setError","onError","console","log","graphQLErrors","message","login","result","data","token","value","firstName","lastName","localStorage","setItem","handleForm","event","preventDefault","variables","handleSignOut","clear","SignInForm","target","loading","signOut"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { SIGNIN } from \"../../queries/user.query\";\n\nconst SignIn = (): JSX.Element => {\n\tconst [email, setEmail] = useState<string>(\"\");\n\tconst [password, setPassword] = useState<string>(\"\");\n\tconst [error, setError] = useState<boolean>(false);\n\n\tconst [login, result] = useMutation(SIGNIN, {\n\t\tonError: (error) => {\n\t\t\tsetError(true);\n\t\t\tconsole.log(error.graphQLErrors[0].message);\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tif (result.data) {\n\t\t\tconst token = result.data.login.value;\n\t\t\tconst firstName = result.data.login.firstName;\n\t\t\tconst lastName = result.data.login.lastName;\n\t\t\tlocalStorage.setItem(\"token\", token);\n\t\t\tlocalStorage.setItem(\"firstName\", firstName);\n\t\t\tlocalStorage.setItem(\"lastName\", lastName);\n\t\t}\n\t}, [result.data]);\n\n\tconst handleForm = async (event) => {\n\t\tevent.preventDefault();\n\t\tlogin({\n\t\t\tvariables: { email, password },\n\t\t});\n\t};\n\n\tconst handleSignOut = () => {\n\t\tlocalStorage.clear();\n\t};\n\n\tconst SignInForm = (\n\t\t<div>\n\t\t\t<form onSubmit={handleForm}>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={({ target }) => setEmail(target.value)}\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={({ target }) => setPassword(target.value)}\n\t\t\t\t/>\n\t\t\t</form>\n\t\t</div>\n\t);\n\n\tif (result.loading) return <div>Loading...</div>;\n\tconst signOut = <button onClick={handleSignOut}>Sign Out</button>;\n\n\treturn false ? signOut : SignInForm;\n};\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}